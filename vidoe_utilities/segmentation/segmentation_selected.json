{"id":"25b8f954-bbf7-4589-9360-df8037c84917","revision":0,"last_node_id":23,"last_link_id":21,"nodes":[{"id":3,"type":"Note","pos":[631.4273071289062,-104.58447265625],"size":[309.1065368652344,177.01339721679688],"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[],"properties":{"text":""},"widgets_values":["To get the image for the points editor, first create a canvas, then either input image/video (first frame is taken), or copy/paste an image while the node is selected, or drag&drop an image.\n\nWARNING: the image WILL BE SAVED to the node in compressed format, including when saving the workflow!\n\nClick the ? on the node for more information"],"color":"#432","bgcolor":"#653"},{"id":4,"type":"PreviewAnimation","pos":[2199.939453125,617.1847534179688],"size":[514.92431640625,577.3973999023438],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"images","name":"images","shape":7,"type":"IMAGE","link":2},{"localized_name":"masks","name":"masks","shape":7,"type":"MASK","link":21},{"localized_name":"fps","name":"fps","type":"FLOAT","widget":{"name":"fps"},"link":null}],"outputs":[],"title":"Preview Animation 16x640x360","properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.7","Node name for S&R":"PreviewAnimation"},"widgets_values":[16]},{"id":6,"type":"VHS_LoadVideo","pos":[310.4969177246094,113.61805725097656],"size":[363.24957275390625,517.077880859375],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"meta_batch","name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"localized_name":"video","name":"video","type":"COMBO","widget":{"name":"video"},"link":null},{"localized_name":"force_rate","name":"force_rate","type":"FLOAT","widget":{"name":"force_rate"},"link":null},{"localized_name":"custom_width","name":"custom_width","type":"INT","widget":{"name":"custom_width"},"link":null},{"localized_name":"custom_height","name":"custom_height","type":"INT","widget":{"name":"custom_height"},"link":null},{"localized_name":"frame_load_cap","name":"frame_load_cap","type":"INT","widget":{"name":"frame_load_cap"},"link":null},{"localized_name":"skip_first_frames","name":"skip_first_frames","type":"INT","widget":{"name":"skip_first_frames"},"link":null},{"localized_name":"select_every_nth","name":"select_every_nth","type":"INT","widget":{"name":"select_every_nth"},"link":null},{"localized_name":"format","name":"format","shape":7,"type":"COMBO","widget":{"name":"format"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[2,5,14]},{"localized_name":"frame_count","name":"frame_count","type":"INT","links":null},{"localized_name":"audio","name":"audio","type":"AUDIO","links":null},{"localized_name":"video_info","name":"video_info","type":"VHS_VIDEOINFO","links":null}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"1.7.7","Node name for S&R":"VHS_LoadVideo"},"widgets_values":{"video":"radiocrop.mov","force_rate":0,"custom_width":0,"custom_height":0,"frame_load_cap":16,"skip_first_frames":0,"select_every_nth":4,"format":"AnimateDiff","choose video to upload":"image","videopreview":{"hidden":false,"paused":false,"params":{"frame_load_cap":16,"skip_first_frames":0,"force_rate":0,"filename":"radiocrop.mov","type":"input","format":"video/mov","select_every_nth":4}}}},{"id":17,"type":"LoadImage","pos":[856.3941650390625,-546.3885498046875],"size":[274,314],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":null},{"localized_name":"MASK","name":"MASK","type":"MASK","links":[16]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.67","Node name for S&R":"LoadImage"},"widgets_values":["clipspace/clipspace-painted-masked-171462.png [input]","image"]},{"id":18,"type":"PreviewImage","pos":[2190.704345703125,-161.04502868652344],"size":[140,246],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":17}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.67","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":19,"type":"PreviewImage","pos":[2379.4755859375,-87.14569091796875],"size":[140,246],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":18}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.67","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":21,"type":"PreviewImage","pos":[2726.724853515625,-396.61419677734375],"size":[140,246],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":20}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.67","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":20,"type":"MaskToImage","pos":[1939.3580322265625,-415.9271240234375],"size":[184.5833282470703,26],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"mask","name":"mask","type":"MASK","link":19}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[20]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.67","Node name for S&R":"MaskToImage"},"widgets_values":[]},{"id":15,"type":"SAMLoader","pos":[1069.323974609375,-178.3291473388672],"size":[270,82],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"model_name","name":"model_name","type":"COMBO","widget":{"name":"model_name"},"link":null},{"localized_name":"device_mode","name":"device_mode","type":"COMBO","widget":{"name":"device_mode"},"link":null}],"outputs":[{"localized_name":"SAM_MODEL","name":"SAM_MODEL","type":"SAM_MODEL","links":[13]}],"properties":{"cnr_id":"comfyui-impact-pack","ver":"8.25.1","Node name for S&R":"SAMLoader"},"widgets_values":["sam_vit_b_01ec64.pth","AUTO"]},{"id":11,"type":"SplineEditor","pos":[398.74041748046875,890.2322387695312],"size":[685,810],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"bg_image","name":"bg_image","shape":7,"type":"IMAGE","link":null},{"localized_name":"points_store","name":"points_store","type":"STRING","widget":{"name":"points_store"},"link":null},{"localized_name":"coordinates","name":"coordinates","type":"STRING","widget":{"name":"coordinates"},"link":null},{"localized_name":"mask_width","name":"mask_width","type":"INT","widget":{"name":"mask_width"},"link":null},{"localized_name":"mask_height","name":"mask_height","type":"INT","widget":{"name":"mask_height"},"link":null},{"localized_name":"points_to_sample","name":"points_to_sample","type":"INT","widget":{"name":"points_to_sample"},"link":null},{"localized_name":"sampling_method","name":"sampling_method","type":"COMBO","widget":{"name":"sampling_method"},"link":null},{"localized_name":"interpolation","name":"interpolation","type":"COMBO","widget":{"name":"interpolation"},"link":null},{"localized_name":"tension","name":"tension","type":"FLOAT","widget":{"name":"tension"},"link":null},{"localized_name":"repeat_output","name":"repeat_output","type":"INT","widget":{"name":"repeat_output"},"link":null},{"localized_name":"float_output_type","name":"float_output_type","type":"COMBO","widget":{"name":"float_output_type"},"link":null},{"localized_name":"min_value","name":"min_value","shape":7,"type":"FLOAT","widget":{"name":"min_value"},"link":null},{"localized_name":"max_value","name":"max_value","shape":7,"type":"FLOAT","widget":{"name":"max_value"},"link":null}],"outputs":[{"localized_name":"mask","name":"mask","type":"MASK","links":[]},{"localized_name":"coord_str","name":"coord_str","type":"STRING","links":[11]},{"localized_name":"float","name":"float","type":"FLOAT","links":[]},{"localized_name":"count","name":"count","type":"INT","links":[]},{"localized_name":"normalized_str","name":"normalized_str","type":"STRING","links":[]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.7","Node name for S&R":"SplineEditor","points":"SplineEditor"},"widgets_values":["[{\"points\":[{\"x\":216.22925521877434,\"y\":233.5553173356633},{\"x\":298.00826841049025,\"y\":160.09281396005406},{\"x\":383.252494025584,\"y\":236.32748727436552}],\"color\":\"#1f77b4\",\"name\":\"Spline 1\"}]","[[{\"x\":216.229248046875,\"y\":233.55531311035156},{\"x\":225.38406372070312,\"y\":221.2991943359375},{\"x\":234.8561248779297,\"y\":209.28684997558594},{\"x\":244.72998046875,\"y\":197.60308837890625},{\"x\":255.1343231201172,\"y\":186.390380859375},{\"x\":266.27801513671875,\"y\":175.9160614013672},{\"x\":278.5272521972656,\"y\":166.77557373046875},{\"x\":292.4780578613281,\"y\":160.67767333984375},{\"x\":307.4759521484375,\"y\":162.0935516357422},{\"x\":320.8448181152344,\"y\":169.45169067382812},{\"x\":332.7955322265625,\"y\":178.98828125},{\"x\":343.843994140625,\"y\":189.56517028808594},{\"x\":354.2763671875,\"y\":200.75253295898438},{\"x\":364.25823974609375,\"y\":212.34449768066406},{\"x\":373.8936462402344,\"y\":224.22640991210938},{\"x\":383.2524719238281,\"y\":236.32745361328125}]]",640,360,16,"path","cardinal",0.5,1,"list",0,1,"",null]},{"id":16,"type":"AutomaticMask(segment anything)","pos":[1506.9857177734375,-178.13226318359375],"size":[339.33331298828125,218],"flags":{},"order":8,"mode":4,"inputs":[{"localized_name":"sam_model","name":"sam_model","type":"SAM_MODEL","link":13},{"localized_name":"image","name":"image","type":"IMAGE","link":14},{"localized_name":"mask","name":"mask","type":"MASK","link":16},{"localized_name":"points_per_side","name":"points_per_side","type":"INT","widget":{"name":"points_per_side"},"link":null},{"localized_name":"pred_iou_thresh","name":"pred_iou_thresh","type":"FLOAT","widget":{"name":"pred_iou_thresh"},"link":null},{"localized_name":"stability_score_thresh","name":"stability_score_thresh","type":"FLOAT","widget":{"name":"stability_score_thresh"},"link":null},{"localized_name":"crop_n_layers","name":"crop_n_layers","type":"INT","widget":{"name":"crop_n_layers"},"link":null},{"localized_name":"crop_n_points_downscale_factor","name":"crop_n_points_downscale_factor","type":"INT","widget":{"name":"crop_n_points_downscale_factor"},"link":null},{"localized_name":"min_mask_region_area","name":"min_mask_region_area","type":"INT","widget":{"name":"min_mask_region_area"},"link":null}],"outputs":[{"localized_name":"Image","name":"Image","type":"IMAGE","links":[17]},{"localized_name":"Mask","name":"Mask","type":"MASK","links":[19]},{"localized_name":"Segment Image","name":"Segment Image","type":"IMAGE","links":[18]}],"properties":{"cnr_id":"ComfyUI_Segment_Mask","ver":"2218a3fa401255e1889d8181d5ebb45d1583d213","Node name for S&R":"AutomaticMask(segment anything)"},"widgets_values":[32,0.86,0.92,1,2,100]},{"id":23,"type":"SplineEditor","pos":[2862.53955078125,765.5994873046875],"size":[685,810],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"bg_image","name":"bg_image","shape":7,"type":"IMAGE","link":null},{"localized_name":"points_store","name":"points_store","type":"STRING","widget":{"name":"points_store"},"link":null},{"localized_name":"coordinates","name":"coordinates","type":"STRING","widget":{"name":"coordinates"},"link":null},{"localized_name":"mask_width","name":"mask_width","type":"INT","widget":{"name":"mask_width"},"link":null},{"localized_name":"mask_height","name":"mask_height","type":"INT","widget":{"name":"mask_height"},"link":null},{"localized_name":"points_to_sample","name":"points_to_sample","type":"INT","widget":{"name":"points_to_sample"},"link":null},{"localized_name":"sampling_method","name":"sampling_method","type":"COMBO","widget":{"name":"sampling_method"},"link":null},{"localized_name":"interpolation","name":"interpolation","type":"COMBO","widget":{"name":"interpolation"},"link":null},{"localized_name":"tension","name":"tension","type":"FLOAT","widget":{"name":"tension"},"link":null},{"localized_name":"repeat_output","name":"repeat_output","type":"INT","widget":{"name":"repeat_output"},"link":null},{"localized_name":"float_output_type","name":"float_output_type","type":"COMBO","widget":{"name":"float_output_type"},"link":null},{"localized_name":"min_value","name":"min_value","shape":7,"type":"FLOAT","widget":{"name":"min_value"},"link":null},{"localized_name":"max_value","name":"max_value","shape":7,"type":"FLOAT","widget":{"name":"max_value"},"link":null}],"outputs":[{"localized_name":"mask","name":"mask","type":"MASK","links":null},{"localized_name":"coord_str","name":"coord_str","type":"STRING","links":[]},{"localized_name":"float","name":"float","type":"FLOAT","links":null},{"localized_name":"count","name":"count","type":"INT","links":null},{"localized_name":"normalized_str","name":"normalized_str","type":"STRING","links":null}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.7","Node name for S&R":"SplineEditor","points":"SplineEditor"},"widgets_values":["[{\"points\":[{\"x\":452.91781762765464,\"y\":245.36891952944222},{\"x\":440.92610351531346,\"y\":120.83958067051478},{\"x\":130.9864156886496,\"y\":114.38250384079262}],\"color\":\"#ff7f0e\",\"name\":\"Spline 2\"}]","[[{\"x\":452.9178161621094,\"y\":245.36892700195312},{\"x\":463.0592346191406,\"y\":217.0800018310547},{\"x\":469.8363952636719,\"y\":187.82174682617188},{\"x\":470.0934143066406,\"y\":157.88011169433594},{\"x\":457.1375732421875,\"y\":131.30288696289062},{\"x\":430.824462890625,\"y\":117.52568817138672},{\"x\":401.2577819824219,\"y\":112.22831726074219},{\"x\":371.3115539550781,\"y\":109.64552307128906},{\"x\":341.2765808105469,\"y\":108.41653442382812},{\"x\":311.2178649902344,\"y\":108.03258514404297},{\"x\":281.1571960449219,\"y\":108.23910522460938},{\"x\":251.10281372070312,\"y\":108.8879165649414},{\"x\":221.0577850341797,\"y\":109.8836441040039},{\"x\":191.0236358642578,\"y\":111.16077423095703},{\"x\":160.99989318847656,\"y\":112.67218780517578},{\"x\":130.9870147705078,\"y\":114.3824691772461}]]",640,360,16,"path","cardinal",0.5,1,"list",0,1,"",null]},{"id":9,"type":"SplineEditor","pos":[1218.301025390625,903.4149780273438],"size":[685,810],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"bg_image","name":"bg_image","shape":7,"type":"IMAGE","link":null},{"localized_name":"points_store","name":"points_store","type":"STRING","widget":{"name":"points_store"},"link":null},{"localized_name":"coordinates","name":"coordinates","type":"STRING","widget":{"name":"coordinates"},"link":null},{"localized_name":"mask_width","name":"mask_width","type":"INT","widget":{"name":"mask_width"},"link":null},{"localized_name":"mask_height","name":"mask_height","type":"INT","widget":{"name":"mask_height"},"link":null},{"localized_name":"points_to_sample","name":"points_to_sample","type":"INT","widget":{"name":"points_to_sample"},"link":null},{"localized_name":"sampling_method","name":"sampling_method","type":"COMBO","widget":{"name":"sampling_method"},"link":null},{"localized_name":"interpolation","name":"interpolation","type":"COMBO","widget":{"name":"interpolation"},"link":null},{"localized_name":"tension","name":"tension","type":"FLOAT","widget":{"name":"tension"},"link":null},{"localized_name":"repeat_output","name":"repeat_output","type":"INT","widget":{"name":"repeat_output"},"link":null},{"localized_name":"float_output_type","name":"float_output_type","type":"COMBO","widget":{"name":"float_output_type"},"link":null},{"localized_name":"min_value","name":"min_value","shape":7,"type":"FLOAT","widget":{"name":"min_value"},"link":null},{"localized_name":"max_value","name":"max_value","shape":7,"type":"FLOAT","widget":{"name":"max_value"},"link":null}],"outputs":[{"localized_name":"mask","name":"mask","type":"MASK","links":null},{"localized_name":"coord_str","name":"coord_str","type":"STRING","links":[12]},{"localized_name":"float","name":"float","type":"FLOAT","links":null},{"localized_name":"count","name":"count","type":"INT","links":null},{"localized_name":"normalized_str","name":"normalized_str","type":"STRING","links":null}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.7","Node name for S&R":"SplineEditor","points":"SplineEditor"},"widgets_values":["[{\"points\":[{\"x\":452.91781762765464,\"y\":245.36891952944222},{\"x\":440.92610351531346,\"y\":120.83958067051478},{\"x\":130.9864156886496,\"y\":114.38250384079262}],\"color\":\"#ff7f0e\",\"name\":\"Spline 2\"}]","[[{\"x\":452.9178161621094,\"y\":245.36892700195312},{\"x\":463.0592346191406,\"y\":217.0800018310547},{\"x\":469.8363952636719,\"y\":187.82174682617188},{\"x\":470.0934143066406,\"y\":157.88011169433594},{\"x\":457.1375732421875,\"y\":131.30288696289062},{\"x\":430.824462890625,\"y\":117.52568817138672},{\"x\":401.2577819824219,\"y\":112.22831726074219},{\"x\":371.3115539550781,\"y\":109.64552307128906},{\"x\":341.2765808105469,\"y\":108.41653442382812},{\"x\":311.2178649902344,\"y\":108.03258514404297},{\"x\":281.1571960449219,\"y\":108.23910522460938},{\"x\":251.10281372070312,\"y\":108.8879165649414},{\"x\":221.0577850341797,\"y\":109.8836441040039},{\"x\":191.0236358642578,\"y\":111.16077423095703},{\"x\":160.99989318847656,\"y\":112.67218780517578},{\"x\":130.9870147705078,\"y\":114.3824691772461}]]",640,360,16,"path","cardinal",0.5,1,"list",0,1,"",null]},{"id":1,"type":"DownloadAndLoadSAM2Model","pos":[1022.5440673828125,278.40167236328125],"size":[315,130],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"segmentor","name":"segmentor","type":"COMBO","widget":{"name":"segmentor"},"link":null},{"localized_name":"device","name":"device","type":"COMBO","widget":{"name":"device"},"link":null},{"localized_name":"precision","name":"precision","type":"COMBO","widget":{"name":"precision"},"link":null}],"outputs":[{"localized_name":"sam2_model","name":"sam2_model","type":"SAM2MODEL","links":[4]}],"properties":{"cnr_id":"comfyui-segment-anything-2","ver":"1.0.2","Node name for S&R":"DownloadAndLoadSAM2Model"},"widgets_values":["sam2.1_hiera_small.safetensors","video","cuda","bf16"]},{"id":5,"type":"Sam2Segmentation","pos":[1490.9403076171875,277.0567321777344],"size":[315,182],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"sam2_model","name":"sam2_model","type":"SAM2MODEL","link":4},{"localized_name":"image","name":"image","type":"IMAGE","link":5},{"localized_name":"coordinates_positive","name":"coordinates_positive","shape":7,"type":"STRING","link":11},{"localized_name":"coordinates_negative","name":"coordinates_negative","shape":7,"type":"STRING","link":12},{"localized_name":"bboxes","name":"bboxes","shape":7,"type":"BBOX","link":null},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"keep_model_loaded","name":"keep_model_loaded","type":"BOOLEAN","widget":{"name":"keep_model_loaded"},"link":null},{"localized_name":"individual_objects","name":"individual_objects","shape":7,"type":"BOOLEAN","widget":{"name":"individual_objects"},"link":null}],"outputs":[{"localized_name":"mask","name":"mask","type":"MASK","slot_index":0,"links":[21]}],"properties":{"cnr_id":"comfyui-segment-anything-2","ver":"1.0.2","Node name for S&R":"Sam2Segmentation"},"widgets_values":[false,true]}],"links":[[2,6,0,4,0,"IMAGE"],[4,1,0,5,0,"SAM2MODEL"],[5,6,0,5,1,"IMAGE"],[11,11,1,5,2,"STRING"],[12,9,1,5,3,"STRING"],[13,15,0,16,0,"SAM_MODEL"],[14,6,0,16,1,"IMAGE"],[16,17,1,16,2,"MASK"],[17,16,0,18,0,"IMAGE"],[18,16,2,19,0,"IMAGE"],[19,16,1,20,0,"MASK"],[20,20,0,21,0,"IMAGE"],[21,5,0,4,1,"MASK"]],"groups":[],"config":{},"extra":{"ds":{"scale":0.8264462809917356,"offset":[-1160.1908833611315,109.20048980399116]}},"version":0.4}